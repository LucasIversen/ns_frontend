<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/icon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <title>Nordic Storm</title>

    <meta property="og:title" content="Nordic Storm - Latest News" />
    <meta
      property="og:description"
      content="Catch up on the latest Nordic Storm updates!"
    />
    <meta property="og:image" content="/default-image.png" />

    <script>
      (function () {
        const path = window.location.pathname;
        const match = path.match(/^\/news\/([^/]+)/);
        if (!match) return;

        const articleId = match[1];

        // ✅ Fetch the pre-built articles.json file
        fetch("/articles.json")
          .then((response) => response.json())
          .then((articles) => {
            const article = articles[articleId];
            if (!article) return;

            console.log("Article metadata:", article);

            // ✅ Update document title
            document.title = article.title || "Nordic Storm - Article";

            // ✅ Update Open Graph Meta Tags
            document
              .querySelector('meta[property="og:title"]')
              .setAttribute("content", article.title);
            document
              .querySelector('meta[property="og:description"]')
              .setAttribute("content", article.description);
            document
              .querySelector('meta[property="og:image"]')
              .setAttribute("content", article.articleImage);
          })
          .catch((error) =>
            console.error("Failed to load article metadata:", error)
          );
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Montserrat", sans-serif;
    }
  </style>
</html>
