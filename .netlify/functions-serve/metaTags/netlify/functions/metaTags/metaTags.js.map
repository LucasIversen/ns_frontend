{
  "version": 3,
  "sources": ["../../../../../../Users/lucasiversen/other_projects/ns_frontend/netlify/functions/metaTags/metaTags.mjs"],
  "sourceRoot": "/var/folders/rk/pv9lwp3j7s5_wvgtj8tlgslc0000gn/T/tmp-69442-oW9EmEpMoy0w",
  "sourcesContent": ["const fs = require(\"fs\");\nconst path = require(\"path\");\n\nexports.handler = async (event) => {\n  try {\n    console.log(\"\uD83D\uDE80 Serverless Function Triggered!\");\n\n    // \u2705 Extract article ID from the URL path\n    let match = event.path.match(/\\/news\\/([^/]+)/);\n    if (!match) {\n      match = event.path.match(/\\/metaTags\\/([^/]+)/);\n    }\n\n    if (!match) {\n      return {\n        statusCode: 400,\n        body: \"Article ID not provided\",\n      };\n    }\n\n    const articleId = match[1];\n    console.log(\"\uD83D\uDCCC Extracted Article ID:\", articleId);\n\n    // \u2705 Load `articles.json` from Netlify's deployed functions directory\n    const response = await fetch(\"https://nordicstorm.net/articles.json\");\n\n    if (!response.ok) {\n      throw new Error(\"Failed to load articles.json\");\n    }\n\n    const articles = await response.json();\n    console.log(\"\u2705 Loaded Articles JSON\");\n\n    const article = articles[articleId];\n\n    if (!article) {\n      console.log(\"\u274C Article Not Found\");\n      return { statusCode: 404, body: \"Article not found\" };\n    }\n\n    console.log(\"\uD83D\uDCDD Returning meta tags for:\", article.title);\n\n    return {\n      statusCode: 200,\n      headers: { \"Content-Type\": \"text/html\" },\n      body: `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <title>${article.title}</title>\n\n        <meta property=\"og:title\" content=\"${article.title}\" />\n        <meta property=\"og:description\" content=\"${article.description}\" />\n        <meta property=\"og:image\" content=\"${article.articleImage}\" />\n        <meta property=\"og:url\" content=\"https://your-site.com/news/${articleId}\" />\n      </head>\n      <body>\n        <p>Loading...</p>\n        <script>window.location.href = \"/\";</script>\n      </body>\n      </html>\n      `,\n    };\n  } catch (error) {\n    console.error(\"\u274C Error in Function:\", error);\n    return { statusCode: 500, body: \"Internal Server Error\" };\n  }\n};\n"],
  "mappings": ";AAAA,IAAM,KAAK,QAAQ,IAAI;AACvB,IAAM,OAAO,QAAQ,MAAM;AAE3B,QAAQ,UAAU,OAAO,UAAU;AACjC,MAAI;AACF,YAAQ,IAAI,0CAAmC;AAG/C,QAAI,QAAQ,MAAM,KAAK,MAAM,iBAAiB;AAC9C,QAAI,CAAC,OAAO;AACV,cAAQ,MAAM,KAAK,MAAM,qBAAqB;AAAA,IAChD;AAEA,QAAI,CAAC,OAAO;AACV,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM;AAAA,MACR;AAAA,IACF;AAEA,UAAM,YAAY,MAAM,CAAC;AACzB,YAAQ,IAAI,mCAA4B,SAAS;AAGjD,UAAM,WAAW,MAAM,MAAM,uCAAuC;AAEpE,QAAI,CAAC,SAAS,IAAI;AAChB,YAAM,IAAI,MAAM,8BAA8B;AAAA,IAChD;AAEA,UAAM,WAAW,MAAM,SAAS,KAAK;AACrC,YAAQ,IAAI,6BAAwB;AAEpC,UAAM,UAAU,SAAS,SAAS;AAElC,QAAI,CAAC,SAAS;AACZ,cAAQ,IAAI,0BAAqB;AACjC,aAAO,EAAE,YAAY,KAAK,MAAM,oBAAoB;AAAA,IACtD;AAEA,YAAQ,IAAI,sCAA+B,QAAQ,KAAK;AAExD,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS,EAAE,gBAAgB,YAAY;AAAA,MACvC,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAMK,QAAQ,KAAK;AAAA;AAAA,6CAEe,QAAQ,KAAK;AAAA,mDACP,QAAQ,WAAW;AAAA,6CACzB,QAAQ,YAAY;AAAA,sEACK,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAQ3E;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,MAAM,6BAAwB,KAAK;AAC3C,WAAO,EAAE,YAAY,KAAK,MAAM,wBAAwB;AAAA,EAC1D;AACF;",
  "names": []
}
